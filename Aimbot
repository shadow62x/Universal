local plr = game.Players.LocalPlayer
local m = plr:GetMouse()
local ps = game:GetService("Players")

local aimbot = false

m.Button2Down:Connect(function()
    aimbot = true
end)

m.Button2Up:Connect(function()
    aimbot = false
end)

game:GetService("RunService").RenderStepped:Connect(function()
    if aimbot then
        local tgt = nil
        local d = r

        for _, p in pairs(ps:GetPlayers()) do
            if p ~= plr and p.Character and p.Character:FindFirstChild(pName) then
                local part = p.Character[pName]
                local screenP, onScreen = workspace.CurrentCamera:WorldToViewportPoint(part.Position)
                local dist = (Vector2.new(screenP.X, screenP.Y) - Vector2.new(m.X, m.Y)).Magnitude

                if dist < d then
                    d = dist
                    tgt = part
                end
            end
        end

        if tgt then
            local tgtPos = tgt.Position
            local camPos = workspace.CurrentCamera.CFrame.Position
            local dir = (tgtPos - camPos).unit

            workspace.CurrentCamera.CFrame = CFrame.new(camPos + dir * s, tgtPos)
        end
    end
end)
